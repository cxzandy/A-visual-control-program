# 🌐 Tiaozhanbei2.0 Web控制界面使用指南

## 📱 界面概览

Tiaozhanbei2.0 Web控制界面是一个现代化的浏览器端控制面板，提供直观的图形化操作方式。

### 🎨 界面特点

- **现代化设计** - 渐变背景、圆角卡片、阴影效果
- **响应式布局** - 自适应桌面、平板、手机屏幕
- **实时更新** - 状态、图像、日志实时刷新
- **中文界面** - 完全中文化，操作简单

## 🚀 快速开始

### 1. 启动Web服务

```bash
# 进入项目目录
cd A-visual-control-program

# 启动Web界面
./start_web.sh
```

### 2. 访问界面

打开浏览器，访问：
- 本地: http://localhost:5000
- 局域网: http://[您的IP地址]:5000

## 🎮 界面功能详解

### 📊 状态监控栏

界面顶部显示实时系统状态：

| 状态项 | 说明 | 正常值 |
|--------|------|---------|
| 系统状态 | 当前运行状态 | 待机/运行中(模式) |
| 相机状态 | RealSense连接状态 | 已连接 |
| 处理FPS | 图像处理帧率 | 20-30 |
| 检测象限 | 四象限检测结果 | 0-4/4 |
| 处理帧数 | 累计处理帧数 | 递增数字 |

### 🎯 运行模式选择

提供四种运行模式：

#### 1. 演示模式 (Demo)
- **用途**: 快速功能展示和验证
- **特点**: 运行5秒后自动停止
- **推荐**: 首次使用或功能测试

#### 2. 实时追踪 (Track)
- **用途**: 连续管道检测和追踪
- **特点**: 持续运行直到手动停止
- **推荐**: 实际应用场景

#### 3. 相机标定 (Calib)
- **用途**: 校准相机参数
- **特点**: 生成标定文件
- **推荐**: 首次部署或更换相机

#### 4. 系统测试 (Test)
- **用途**: 完整功能测试
- **特点**: 综合测试所有模块
- **推荐**: 系统维护和调试

### 🎮 控制按钮

- **🚀 启动系统**: 启动选定模式的管道追踪
- **⏹️ 停止系统**: 停止当前运行的系统

### 🖼️ 图像显示区域

实时显示管道检测结果：

- **四象限分割**: 白色线条分割图像为四个区域
- **管道线条**: 不同颜色显示各象限检测到的管道
- **轴线拟合**: 黄色线条显示全局管道轴线
- **状态信息**: 叠加显示检测统计和FPS

### 📝 日志记录

底部日志区域显示：
- 用户操作记录
- 系统状态变化
- 错误和警告信息
- 时间戳标记

## 🔧 使用流程

### 基本操作流程

1. **启动Web服务**
   ```bash
   ./start_web.sh
   ```

2. **打开浏览器**
   - 访问 http://localhost:5000

3. **选择运行模式**
   - 点击对应的模式按钮
   - 模式选中后高亮显示

4. **启动系统**
   - 点击"🚀 启动系统"按钮
   - 观察状态栏变化

5. **监控运行**
   - 查看实时状态更新
   - 观察图像检测结果
   - 查看日志信息

6. **停止系统**
   - 点击"⏹️ 停止系统"按钮
   - 确认系统停止

### 故障排除

#### Web界面无法访问
```bash
# 检查服务是否运行
ps aux | grep web_simple

# 检查端口是否被占用
netstat -tlnp | grep :5000

# 重新启动服务
./start_web.sh
```

#### 相机连接失败
- 检查USB连接
- 重新插拔相机
- 确认权限设置

#### 图像无法显示
- 确认系统已启动
- 检查浏览器控制台错误
- 刷新页面重试

## 🎨 界面定制

### 修改端口

编辑 `web_simple.py` 文件末尾：
```python
app.run(host='0.0.0.0', port=5000, debug=False, threaded=True)
```

将 `port=5000` 改为其他端口。

### 修改样式

编辑 `templates/index.html` 中的 CSS 样式部分，可以自定义：
- 颜色主题
- 字体大小
- 布局方式
- 动画效果

## 📱 移动端使用

Web界面完全支持移动设备：

### 手机访问
1. 确保手机和电脑在同一局域网
2. 在手机浏览器访问: http://[电脑IP]:5000
3. 界面自动适配手机屏幕

### 操作建议
- 横屏使用效果更佳
- 支持触摸操作
- 状态栏可能重新排列为纵向

## 🔗 API接口

Web界面提供RESTful API接口：

| 接口 | 方法 | 功能 |
|------|------|------|
| `/api/status` | GET | 获取系统状态 |
| `/api/start` | POST | 启动系统 |
| `/api/stop` | POST | 停止系统 |
| `/api/image` | GET | 获取最新图像 |
| `/api/config` | GET/POST | 配置管理 |

### 使用示例

```bash
# 获取系统状态
curl http://localhost:5000/api/status

# 启动demo模式
curl -X POST http://localhost:5000/api/start \
  -H "Content-Type: application/json" \
  -d '{"mode": "demo"}'

# 停止系统
curl -X POST http://localhost:5000/api/stop
```

## 💡 小贴士

1. **性能优化**: 关闭浏览器其他标签页可提升性能
2. **网络稳定**: 使用有线网络连接可减少延迟
3. **兼容性**: 推荐使用Chrome、Firefox、Edge浏览器
4. **安全性**: 仅在可信网络环境中使用
5. **日志保存**: 重要日志建议手动记录或截图保存

---

**💡 提示**: Web界面是命令行操作的图形化补充，提供更直观的操作体验。对于高级功能和调试，建议结合命令行使用。
