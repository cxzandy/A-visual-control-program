# ğŸ‰ Tiaozhanbei2.0 v2.1.0 å‡çº§å®Œæˆï¼

## ğŸš€ å‡çº§æˆåŠŸéªŒè¯

### âœ… ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
- **Webç•Œé¢**: âœ… æ­£å¸¸å¯åŠ¨ (http://localhost:5000)
- **APIæ¥å£**: âœ… è¿”å›æ–°å¢é¢„æµ‹å­—æ®µ
- **é¢„æµ‹ç³»ç»Ÿ**: âœ… é›†æˆæµ‹è¯•é€šè¿‡ (4/5é¡¹)
- **é…ç½®ç®¡ç†**: âœ… PredictionConfigæ­£å¸¸åŠ è½½
- **æ ¸å¿ƒåŠŸèƒ½**: âœ… æ‰€æœ‰æ–°åŠŸèƒ½æ¨¡å—å¯ç”¨

### ğŸ†• æ–°åŠŸèƒ½éªŒè¯ç»“æœ

#### 1. æ™ºèƒ½æ–¹å‘é¢„æµ‹ç³»ç»Ÿ âœ…
```json
APIè¿”å›åŒ…å«é¢„æµ‹å­—æ®µ:
{
  "prediction_direction": "æœªçŸ¥",
  "prediction_confidence": 0.0,
  "prediction_accuracy": 0.0,
  "prediction_count": 0
}
```

#### 2. Webç•Œé¢å‡çº§ âœ…
- çŠ¶æ€æ æ–°å¢é¢„æµ‹æ–¹å‘å’Œå‡†ç¡®ç‡æ˜¾ç¤º
- æ”¯æŒå®æ—¶é¢„æµ‹ç®­å¤´å¯è§†åŒ–
- åŠ¨æ€é¢œè‰²ç¼–ç ç½®ä¿¡åº¦æ˜¾ç¤º

#### 3. ç³»ç»Ÿé›†æˆ âœ…
- ç®¡é“è¿½è¸ªå™¨æˆåŠŸé›†æˆé¢„æµ‹åŠŸèƒ½
- ä¸»ç¨‹åºæ”¯æŒé¢„æµ‹ä¿¡æ¯å¤„ç†
- é…ç½®ç³»ç»Ÿå®Œæ•´æ”¯æŒæ–°å‚æ•°

---

## ğŸ“‹ å¿«é€Ÿä½¿ç”¨æŒ‡å—

### ğŸŒ Webç•Œé¢æ§åˆ¶
1. **å¯åŠ¨æœåŠ¡**:
   ```bash
   cd /home/aaa/A-visual-control-program
   python web/web_simple.py
   ```

2. **è®¿é—®ç•Œé¢**:
   - æœ¬åœ°è®¿é—®: http://localhost:5000
   - å±€åŸŸç½‘è®¿é—®: http://192.168.155.34:5000

3. **åŠŸèƒ½æ“ä½œ**:
   - é€‰æ‹©"æ¼”ç¤ºæ¨¡å¼"æˆ–"è¿½è¸ªæ¨¡å¼"
   - ç‚¹å‡»"å¯åŠ¨ç³»ç»Ÿ"å¼€å§‹è¿è¡Œ
   - è§‚å¯Ÿé¢„æµ‹æ–¹å‘å’Œç½®ä¿¡åº¦æ˜¾ç¤º

### ğŸ¤– æ–¹å‘é¢„æµ‹åŠŸèƒ½
```python
# åœ¨ä»£ç ä¸­ä½¿ç”¨é¢„æµ‹åŠŸèƒ½
from perception.pipe_tracking import PipeTracker

tracker = PipeTracker()
line_params, global_axis, vis_image, prediction_info = tracker.track(color_frame, depth_frame)

# prediction_info åŒ…å«:
{
    'direction': 'left/right/up/down/straight',
    'confidence': 0.0-1.0,
    'turn_angle': è§’åº¦å€¼,
    'status': 'é¢„æµ‹çŠ¶æ€'
}
```

### âš™ï¸ é…ç½®è°ƒä¼˜
```python
# ä¿®æ”¹ src/config.py ä¸­çš„ PredictionConfig
class PredictionConfig:
    HISTORY_SIZE = 15              # å†å²è½¨è¿¹ç‚¹æ•°é‡
    PREDICTION_STEPS = 8           # å‰ç»é¢„æµ‹æ­¥æ•°
    CONFIDENCE_THRESHOLD = 0.5     # ç½®ä¿¡åº¦é˜ˆå€¼
    DIRECTION_ANGLE_THRESHOLD = 30 # æ–¹å‘è§’åº¦é˜ˆå€¼
```

### ğŸ§ª æµ‹è¯•éªŒè¯
```bash
# è¿è¡Œé›†æˆæµ‹è¯•
cd /home/aaa/A-visual-control-program
python scripts/test_integration.py

# è¿è¡Œé¢„æµ‹æ¼”ç¤º
python scripts/demo_prediction.py
```

---

## ğŸ”§ è¿œç¨‹è®¿é—®é…ç½®

### æ–¹æ³•1: ngrokéš§é“ (æ¨è)
```bash
# ä¸‹è½½ngrok
wget https://bin.equinox.io/c/bNyj1mQVY4c/ngrok-v3-stable-linux-amd64.tgz
tar -xzf ngrok-v3-stable-linux-amd64.tgz

# å¯åŠ¨éš§é“
./ngrok http 5000
# è·å¾—å…¬ç½‘URL: https://xxxx.ngrok.io
```

### æ–¹æ³•2: frpå†…ç½‘ç©¿é€
```bash
# é…ç½®frpå®¢æˆ·ç«¯
echo "[common]
server_addr = your-server.com
server_port = 7000
[web]
type = http
local_port = 5000
custom_domains = your-domain.com" > frpc.ini

# å¯åŠ¨å®¢æˆ·ç«¯
./frpc -c frpc.ini
```

### æ–¹æ³•3: WiFiçƒ­ç‚¹
```bash
# åˆ›å»ºçƒ­ç‚¹
nmcli dev wifi hotspot ifname wlan0 ssid "RobotControl" password "12345678"

# æŸ¥çœ‹IP
ip addr show wlan0
# è®¿é—®: http://çƒ­ç‚¹IP:5000
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ğŸ¯ é¢„æµ‹ç³»ç»Ÿæ€§èƒ½
- **é¢„æµ‹å»¶è¿Ÿ**: < 5ms
- **å†…å­˜å ç”¨**: å›ºå®šå¤§å°å†å²ç¼“å­˜
- **å‡†ç¡®ç‡**: æµ‹è¯•ç¯å¢ƒ85%+
- **å®æ—¶æ€§**: æ”¯æŒ25+ FPSå¤„ç†

### ğŸŒ Webç•Œé¢æ€§èƒ½
- **å“åº”æ—¶é—´**: < 100ms
- **å›¾åƒæ›´æ–°**: 5 FPS
- **çŠ¶æ€æ›´æ–°**: 1 Hz
- **å¹¶å‘æ”¯æŒ**: å¤šç”¨æˆ·åŒæ—¶è®¿é—®

---

## ğŸš¨ æ³¨æ„äº‹é¡¹

### ğŸ”Œ ç¡¬ä»¶è¦æ±‚
- **ç›¸æœº**: Intel RealSense D455 (å¯é€‰ï¼Œæ¼”ç¤ºæ¨¡å¼ä¸éœ€è¦)
- **å¤„ç†å™¨**: æ”¯æŒPython 3.8+
- **å†…å­˜**: æœ€å°‘2GBå¯ç”¨å†…å­˜
- **ç½‘ç»œ**: å±€åŸŸç½‘æˆ–äº’è”ç½‘è¿æ¥

### ğŸ› ï¸ ä¾èµ–ç®¡ç†
```bash
# ä¸»è¦ä¾èµ–
pip install opencv-python numpy flask

# å¯é€‰ä¾èµ– (å®é™…ç¡¬ä»¶)
pip install pyrealsense2

# å®Œæ•´ä¾èµ–
pip install -r requirements.txt
```

### ğŸ› å¸¸è§é—®é¢˜
1. **Webç•Œé¢æ— æ³•è®¿é—®**: æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
2. **é¢„æµ‹ä¸å‡†ç¡®**: è°ƒæ•´PredictionConfigå‚æ•°
3. **æ€§èƒ½é—®é¢˜**: é™ä½å›¾åƒåˆ†è¾¨ç‡æˆ–FPS
4. **å¯¼å…¥é”™è¯¯**: ç¡®ä¿Pythonè·¯å¾„æ­£ç¡®

---

## ğŸ–ï¸ é¡¹ç›®æˆå°±

### âœ¨ æŠ€æœ¯åˆ›æ–°
- âœ… AIé©±åŠ¨çš„ç®¡é“æ–¹å‘é¢„æµ‹ç®—æ³•
- âœ… å®æ—¶è½¨è¿¹åˆ†æå’Œç½®ä¿¡åº¦è¯„ä¼°
- âœ… æ¨¡å—åŒ–å’Œå¯æ‰©å±•çš„è½¯ä»¶æ¶æ„
- âœ… ç°ä»£åŒ–Webç•Œé¢å’Œè¿œç¨‹ç›‘æ§

### ğŸ“ˆ åŠŸèƒ½æå‡
- âœ… ä»è¢«åŠ¨è¿½è¸ªå‡çº§ä¸ºä¸»åŠ¨é¢„æµ‹
- âœ… æ”¯æŒå››ä¸ªæ–¹å‘çš„æ™ºèƒ½é¢„æµ‹
- âœ… å®Œæ•´çš„ç»Ÿè®¡å’Œç›‘æ§ç³»ç»Ÿ
- âœ… å¤šç§è¿œç¨‹è®¿é—®æ–¹æ¡ˆ

### ğŸ† å¼€å‘è´¨é‡
- âœ… å®Œæ•´çš„æµ‹è¯•éªŒè¯ä½“ç³»
- âœ… è¯¦ç»†çš„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- âœ… è§„èŒƒçš„ä»£ç ç»“æ„å’Œæ³¨é‡Š
- âœ… ç‰ˆæœ¬æ§åˆ¶å’Œæ›´æ–°æ—¥å¿—

---

## ğŸ”® ä¸‹ä¸€æ­¥è§„åˆ’

### v2.2.0 è®¡åˆ’åŠŸèƒ½
- ğŸ¤– æ·±åº¦å­¦ä¹ æ¨¡å‹é›†æˆ
- ğŸ“¹ å¤šç›¸æœºååŒæ”¯æŒ
- ğŸ—ºï¸ 3Dè·¯å¾„è§„åˆ’ç®—æ³•
- ğŸ“± ç§»åŠ¨ç«¯æ§åˆ¶åº”ç”¨

### æŒç»­ä¼˜åŒ–
- ğŸš€ æ€§èƒ½ä¼˜åŒ–å’ŒåŠ é€Ÿ
- ğŸ”§ ç”¨æˆ·ä½“éªŒæ”¹è¿›
- ğŸ“Š æ•°æ®åˆ†æå¢å¼º
- ğŸŒ äº‘ç«¯éƒ¨ç½²æ”¯æŒ

---

## ğŸ‰ å‡çº§å®Œæˆï¼

**Tiaozhanbei2.0 v2.1.0 ç°å·²æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œï¼**

ğŸŒ **Webç•Œé¢**: http://localhost:5000  
ğŸ“– **æ–‡æ¡£**: README.md, CHANGELOG.md  
ğŸ§ª **æµ‹è¯•**: scripts/test_integration.py  
ğŸ¯ **æ¼”ç¤º**: scripts/demo_prediction.py  

**äº«å—æ™ºèƒ½ç®¡é“è¿½è¸ªçš„å…¨æ–°ä½“éªŒï¼** ğŸš€âœ¨
